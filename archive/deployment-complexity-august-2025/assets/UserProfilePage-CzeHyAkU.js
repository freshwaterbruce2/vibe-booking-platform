import{e as $,l as v,f as q,j as e,g as F,B as A,L as G}from"./index-Bz50S9TB.js";import{r as k,L as Q}from"./vendor-VgjaNQN2.js";import{H as _,B as xe}from"./BookingHistory-BSy9pJoq.js";import{a6 as R,U as me,T as C,n as Z,a7 as L,M as z,C as I,H as O,a8 as M,a as H,a9 as ue,t as he,A as K,f as ge,e as B,P as be}from"./ui-c8TFxX-w.js";class fe{async analyzeUserPreferences(n){try{const s=await $.getUserBookings(n);if(s.length===0)return v.info("No booking history for personalization analysis",{userId:n}),null;const t=s.filter(a=>a.status==="completed"||a.status==="confirmed").map(a=>a.totalAmount),o=t.length>0?{min:Math.min(...t)*.8,max:Math.max(...t)*1.2,currency:s[0].currency||"USD"}:{min:100,max:500,currency:"USD"},x=s.map(a=>a.nights),d=x.length>0?Math.round(x.reduce((a,g)=>a+g,0)/x.length):2,p=s.map(a=>{const g=new Date(a.createdAt),E=new Date(a.checkIn);return Math.floor((E.getTime()-g.getTime())/(1e3*60*60*24))}),y=p.length>0?Math.round(p.reduce((a,g)=>a+g,0)/p.length):14,S=s.map(a=>a.hotelCity).filter(a=>a).reduce((a,g)=>(a[g]=(a[g]||0)+1,a),{}),m=Object.entries(S).sort(([,a],[,g])=>g-a).slice(0,5).map(([a])=>a),f=t.length>0?t.reduce((a,g)=>a+g,0)/t.length:250;let b="leisure";f>800?b="luxury":f>400?b="business":f<150&&(b="budget");const i=s.map(a=>new Date(a.checkIn).getDay()).reduce((a,g)=>(a[g]=(a[g]||0)+1,a),{}),u=Object.entries(i).sort(([,a],[,g])=>g-a).slice(0,3).map(([a])=>parseInt(a)),N={budgetRange:o,preferredRegions:m,hotelTypes:this.inferHotelTypes(b),amenities:this.inferPreferredAmenities(b,d),bookingPatterns:{averageStayDuration:d,preferredDaysOfWeek:u,seasonalPreferences:this.analyzeSeasonalPreferences(s),advanceBookingDays:y},travelStyle:b,passionCategories:this.inferPassionCategories(b,m)};return v.info("User preferences analyzed successfully",{userId:n,travelStyle:b,averageAmount:f,bookingCount:s.length}),N}catch(s){return v.error("Failed to analyze user preferences:",s),null}}async generatePersonalizationInsights(n){try{const[s,t]=await Promise.all([this.analyzeUserPreferences(n),$.getUserBookings(n)]);if(!s)return null;const o=t.filter(m=>m.status==="completed"),x=o.reduce((m,f)=>{const b=f.hotelCity;return b&&(m[b]=(m[b]||0)+1),m},{}),d=Object.entries(x).sort(([,m],[,f])=>f-m).slice(0,5).map(([m])=>m),p=o.map(m=>m.totalAmount),y=p.length>0?p.reduce((m,f)=>m+f,0)/p.length:200,T=Math.round(y*1.1),S={recommendedHotels:[],budgetOptimization:{averageNightlyRate:y,suggestedBudget:T,seasonalTrends:this.analyzeSeasonalTrends(t)},travelPatterns:{mostVisitedDestinations:d,preferredStayDuration:s.bookingPatterns.averageStayDuration,bookingLeadTime:s.bookingPatterns.advanceBookingDays},preferences:s};return v.info("Personalization insights generated",{userId:n,insightsGenerated:!0,destinationCount:d.length}),S}catch(s){return v.error("Failed to generate personalization insights:",s),null}}inferHotelTypes(n){const s=[];switch(n){case"luxury":s.push("5-star","boutique","resort","luxury suite");break;case"business":s.push("business hotel","4-star","conference hotel","city center");break;case"leisure":s.push("3-star","4-star","family-friendly","resort");break;case"budget":s.push("2-star","3-star","budget hotel","hostel");break;case"adventure":s.push("eco-lodge","mountain resort","adventure hotel","camping");break}return s}inferPreferredAmenities(n,s){const t=["free-wifi","parking"];return n==="luxury"&&t.push("spa","concierge","fine-dining","premium-bedding"),n==="business"&&t.push("business-center","meeting-rooms","express-checkout"),s>3&&t.push("room-service","laundry","kitchenette"),t}inferPassionCategories(n,s){const t=[];n==="luxury"&&t.push("luxury","fine-dining"),n==="adventure"&&t.push("adventure","nature"),n==="business"&&t.push("business","city-break");const o={"New York":["culture","city-break","business"],Paris:["romance","culture","fine-dining"],Tokyo:["culture","business","adventure"],London:["culture","business","city-break"],Miami:["beach","nightlife","luxury"],Barcelona:["culture","beach","architecture"],Rome:["culture","history","fine-dining"]};return s.forEach(x=>{const d=o[x];d&&t.push(...d)}),[...new Set(t)]}analyzeSeasonalPreferences(n){const s=n.reduce((t,o)=>{const x=new Date(o.checkIn).getMonth();let d="spring";return x>=2&&x<=4?d="spring":x>=5&&x<=7?d="summer":x>=8&&x<=10?d="fall":d="winter",t[d]=(t[d]||0)+1,t},{});return Object.entries(s).sort(([,t],[,o])=>o-t).slice(0,2).map(([t])=>t)}analyzeSeasonalTrends(n){const s=n.reduce((t,o)=>{const x=new Date(o.checkIn).getMonth();return t[x]||(t[x]=[]),t[x].push(o.totalAmount),t},{});return Object.entries(s).map(([t,o])=>({month:parseInt(t),averageSpending:o.reduce((x,d)=>x+d,0)/o.length,bookingCount:o.length}))}async updateUserPreferences(n,s){try{const o={...await this.analyzeUserPreferences(n),...s};return localStorage.setItem(`user-preferences-${n}`,JSON.stringify(o)),v.info("User preferences updated",{userId:n}),!0}catch(t){return v.error("Failed to update user preferences:",t),!1}}async getUserPreferences(n){try{const s=localStorage.getItem(`user-preferences-${n}`);return s?JSON.parse(s):this.analyzeUserPreferences(n)}catch(s){return v.error("Failed to get user preferences:",s),null}}}const X=new fe,je=({className:h=""})=>{const{user:n}=q(),[s,t]=k.useState(null),[o,x]=k.useState(null),[d,p]=k.useState(!0),[y,T]=k.useState("preferences");k.useEffect(()=>{n?.id&&S()},[n?.id]);const S=async()=>{if(n?.id)try{p(!0);const[i,u]=await Promise.all([X.getUserPreferences(n.id),X.generatePersonalizationInsights(n.id)]);t(i),x(u),v.info("Personalization data loaded",{userId:n.id,hasPreferences:!!i,hasInsights:!!u})}catch(i){v.error("Failed to load personalization data:",i)}finally{p(!1)}},m=(i,u,N)=>{const a=new Intl.NumberFormat("en-US",{style:"currency",currency:N,minimumFractionDigits:0});return`${a.format(i)} - ${a.format(u)}`},f=i=>({luxury:"bg-purple-100 text-purple-800 border-purple-200",business:"bg-blue-100 text-blue-800 border-blue-200",leisure:"bg-green-100 text-green-800 border-green-200",budget:"bg-orange-100 text-orange-800 border-orange-200",adventure:"bg-red-100 text-red-800 border-red-200"})[i]||"bg-gray-100 text-gray-800 border-gray-200";if(d)return e.jsx("div",{className:`flex justify-center py-12 ${h}`,children:e.jsx(F,{size:"lg"})});if(!s&&!o)return e.jsx("div",{className:`text-center py-12 ${h}`,children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-cream-50 rounded-2xl p-8 border border-slate-200",children:[e.jsx(R,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Build Your Travel Profile"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Make a few bookings to unlock personalized recommendations and insights about your travel preferences."}),e.jsx(A,{size:"lg",onClick:S,children:"Refresh Analysis"})]})});const b=()=>e.jsx("div",{className:"space-y-6",children:s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-luxury-gold"}),"Travel Style"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-medium border ${f(s.travelStyle)}`,children:s.travelStyle.charAt(0).toUpperCase()+s.travelStyle.slice(1)}),e.jsx("p",{className:"text-slate-600 text-sm",children:"Based on your booking patterns and spending habits"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-luxury-gold"}),"Budget Range"]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-700",children:"Typical Range:"}),e.jsx("span",{className:"font-semibold text-luxury-navy",children:m(s.budgetRange.min,s.budgetRange.max,s.budgetRange.currency)})]}),e.jsx("div",{className:"text-sm text-slate-600",children:"Per night, based on your booking history"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-luxury-gold"}),"Favorite Destinations"]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.preferredRegions.slice(0,8).map((i,u)=>e.jsx("span",{className:"px-3 py-1 bg-slate-100 text-slate-700 rounded-full text-sm",children:i},u))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-luxury-gold"}),"Booking Patterns"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-slate-600",children:"Average Stay:"}),e.jsxs("span",{className:"font-semibold text-slate-900",children:[s.bookingPatterns.averageStayDuration," night",s.bookingPatterns.averageStayDuration>1?"s":""]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-slate-600",children:"Advance Booking:"}),e.jsxs("span",{className:"font-semibold text-slate-900",children:[s.bookingPatterns.advanceBookingDays," days"]})]}),e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsx("span",{className:"text-slate-600",children:"Favorite Seasons:"}),e.jsx("div",{className:"flex gap-1",children:s.bookingPatterns.seasonalPreferences.map((i,u)=>e.jsx("span",{className:"text-sm bg-slate-100 px-2 py-1 rounded text-slate-700",children:i},u))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5 text-luxury-gold"}),"Travel Interests"]})}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.passionCategories.map((i,u)=>e.jsx("span",{className:"px-3 py-1 bg-gradient-to-r from-luxury-navy to-slate-600 text-white rounded-full text-sm",children:i},u))})]})]})}),l=()=>e.jsx("div",{className:"space-y-6",children:o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-luxury-gold"}),"Your Travel Patterns"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-slate-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-luxury-navy mb-1",children:o.travelPatterns.mostVisitedDestinations.length}),e.jsx("div",{className:"text-sm text-slate-600",children:"Unique Destinations"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-luxury-navy mb-1",children:o.travelPatterns.preferredStayDuration}),e.jsx("div",{className:"text-sm text-slate-600",children:"Average Nights"})]}),e.jsxs("div",{className:"text-center p-4 bg-slate-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-luxury-navy mb-1",children:o.travelPatterns.bookingLeadTime}),e.jsx("div",{className:"text-sm text-slate-600",children:"Days in Advance"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5 text-luxury-gold"}),"Budget Insights"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Average Nightly Rate"}),e.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:["$",Math.round(o.budgetOptimization.averageNightlyRate).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-600 mb-1",children:"Suggested Budget"}),e.jsxs("div",{className:"text-2xl font-bold text-luxury-gold",children:["$",Math.round(o.budgetOptimization.suggestedBudget).toLocaleString()]}),e.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"+10% for better options"})]})]})]}),o.travelPatterns.mostVisitedDestinations.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-luxury-gold"}),"Top Destinations"]})}),e.jsx("div",{className:"space-y-3",children:o.travelPatterns.mostVisitedDestinations.slice(0,5).map((i,u)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-luxury-navy text-white rounded-full flex items-center justify-center text-sm font-semibold",children:u+1}),e.jsx("span",{className:"text-slate-900",children:i})]},u))})]})]})});return e.jsxs("div",{className:`space-y-6 ${h}`,children:[e.jsxs("div",{className:"flex space-x-4 border-b border-slate-200",children:[e.jsxs("button",{onClick:()=>T("preferences"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${y==="preferences"?"border-luxury-navy text-luxury-navy":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[e.jsx(me,{className:"w-4 h-4 inline mr-2"}),"My Preferences"]}),e.jsxs("button",{onClick:()=>T("insights"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${y==="insights"?"border-luxury-navy text-luxury-navy":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[e.jsx(C,{className:"w-4 h-4 inline mr-2"}),"Travel Insights"]})]}),e.jsxs("div",{children:[y==="preferences"&&b(),y==="insights"&&l()]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsxs(A,{variant:"outline",onClick:S,disabled:d,className:"flex items-center gap-2",children:[d?e.jsx(F,{size:"sm"}):e.jsx(R,{className:"w-4 h-4"}),"Refresh Analysis"]})})]})},ye=({className:h=""})=>{const{user:n}=q(),[s,t]=k.useState(null),[o,x]=k.useState(!0),[d,p]=k.useState("1year");k.useEffect(()=>{n?.id&&y()},[n?.id,d]);const y=async()=>{if(n?.id)try{x(!0);const l=await $.getUserBookings(n.id),i=T(l,d),u=S(i);t(u),v.info("Travel analytics loaded successfully",{userId:n.id,bookingCount:i.length,timeframe:d})}catch(l){v.error("Failed to load travel analytics:",l)}finally{x(!1)}},T=(l,i)=>{if(i==="all")return l;const u=new Date;let N=new Date;switch(i){case"1year":N.setFullYear(u.getFullYear()-1);break;case"6months":N.setMonth(u.getMonth()-6);break;case"3months":N.setMonth(u.getMonth()-3);break}return l.filter(a=>new Date(a.createdAt)>=N)},S=l=>{const i=l.filter(r=>r.status==="completed"||r.status==="confirmed"),u=l.length,N=i.reduce((r,c)=>r+c.totalAmount,0),a=i.reduce((r,c)=>r+c.nights,0),g=i.length>0?Math.round(a/i.length):0,ee=new Set(i.map(r=>r.hotelCity).filter(r=>r)).size,U=l.map(r=>{const c=new Date(r.createdAt),j=new Date(r.checkIn);return Math.floor((j.getTime()-c.getTime())/(1e3*60*60*24))}),se=U.length>0?Math.round(U.reduce((r,c)=>r+c,0)/U.length):0,te=i.reduce((r,c)=>{const j=new Date(c.checkIn).getMonth();let w="Spring";return j>=2&&j<=4?w="Spring":j>=5&&j<=7?w="Summer":j>=8&&j<=10?w="Fall":w="Winter",r[w]=(r[w]||0)+1,r},{}),ae=Array.from({length:12},(r,c)=>{const j=i.filter(w=>new Date(w.checkIn).getMonth()===c);return{month:c,amount:j.reduce((w,de)=>w+de.totalAmount,0),count:j.length}}).filter(r=>r.count>0),re=i.reduce((r,c)=>{const j=c.hotelCity||"Unknown";return r[j]||(r[j]={count:0,amount:0}),r[j].count+=1,r[j].amount+=c.totalAmount,r},{}),ne=Object.entries(re).map(([r,c])=>({destination:r,...c})).sort((r,c)=>c.count-r.count).slice(0,10),le=l.reduce((r,c)=>(r[c.status]=(r[c.status]||0)+1,r),{}),P=l.slice(0,Math.floor(l.length/2)),D=l.slice(Math.floor(l.length/2)),V=P.length>0?P.reduce((r,c)=>r+c.totalAmount,0)/P.length:0,Y=D.length>0?D.reduce((r,c)=>r+c.totalAmount,0)/D.length:0,ie=V>Y*1.1?"up":V<Y*.9?"down":"stable",oe=P.length>D.length?"increasing":P.length<D.length?"decreasing":"stable",J=P.length>0?P.reduce((r,c)=>r+c.nights,0)/P.length:0,W=D.length>0?D.reduce((r,c)=>r+c.nights,0)/D.length:0,ce=J>W*1.2?"longer":J<W*.8?"shorter":"stable";return{totalBookings:u,totalSpent:N,averageStayDuration:g,totalNights:a,uniqueDestinations:ee,averageAdvanceBooking:se,seasonalBreakdown:te,monthlySpending:ae,destinationBreakdown:ne,statusBreakdown:le,recentTrends:{spendingTrend:ie,bookingFrequency:oe,averageStayTrend:ce}}},m=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(l),f=l=>{switch(l){case"up":case"increasing":case"longer":return e.jsx(C,{className:"w-4 h-4 text-green-600"});case"down":case"decreasing":case"shorter":return e.jsx(C,{className:"w-4 h-4 text-red-600 rotate-180"});default:return e.jsx(C,{className:"w-4 h-4 text-gray-600"})}},b=l=>{switch(l){case"up":case"increasing":case"longer":return"text-green-600";case"down":case"decreasing":case"shorter":return"text-red-600";default:return"text-gray-600"}};return n?o?e.jsx("div",{className:`flex justify-center py-12 ${h}`,children:e.jsx(F,{size:"lg"})}):!s||s.totalBookings===0?e.jsx("div",{className:`text-center py-12 ${h}`,children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-cream-50 rounded-2xl p-8 border border-slate-200",children:[e.jsx(M,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"No travel data yet"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Start booking to see detailed analytics about your travel patterns and preferences."}),e.jsx(A,{size:"lg",onClick:y,children:"Refresh Data"})]})}):e.jsxs("div",{className:`space-y-6 ${h}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-slate-800 to-slate-600 bg-clip-text text-transparent",children:"Travel Analytics"}),e.jsx("div",{className:"flex gap-2",children:[{value:"3months",label:"3M"},{value:"6months",label:"6M"},{value:"1year",label:"1Y"},{value:"all",label:"All"}].map(l=>e.jsx("button",{onClick:()=>p(l.value),className:`px-3 py-1 text-sm rounded-lg transition-colors ${d===l.value?"bg-luxury-navy text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:l.label},l.value))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(I,{className:"w-5 h-5 text-luxury-navy"}),f(s.recentTrends.bookingFrequency)]}),e.jsx("div",{className:"text-2xl font-bold text-luxury-navy mb-1",children:s.totalBookings}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total Bookings"}),e.jsx("div",{className:`text-xs mt-1 ${b(s.recentTrends.bookingFrequency)}`,children:s.recentTrends.bookingFrequency})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(L,{className:"w-5 h-5 text-luxury-gold"}),f(s.recentTrends.spendingTrend)]}),e.jsx("div",{className:"text-2xl font-bold text-luxury-gold mb-1",children:m(s.totalSpent)}),e.jsx("div",{className:"text-sm text-slate-600",children:"Total Spent"}),e.jsxs("div",{className:`text-xs mt-1 ${b(s.recentTrends.spendingTrend)}`,children:["spending trend ",s.recentTrends.spendingTrend]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(H,{className:"w-5 h-5 text-blue-600"}),f(s.recentTrends.averageStayTrend)]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:s.averageStayDuration}),e.jsx("div",{className:"text-sm text-slate-600",children:"Avg. Stay (nights)"}),e.jsxs("div",{className:`text-xs mt-1 ${b(s.recentTrends.averageStayTrend)}`,children:["stays getting ",s.recentTrends.averageStayTrend]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(z,{className:"w-5 h-5 text-green-600"})}),e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:s.uniqueDestinations}),e.jsx("div",{className:"text-sm text-slate-600",children:"Destinations"}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[s.totalNights," total nights"]})]})]}),s.destinationBreakdown.length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(ue,{className:"w-5 h-5 text-luxury-gold"}),"Top Destinations"]}),e.jsx("div",{className:"space-y-3",children:s.destinationBreakdown.slice(0,5).map((l,i)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-luxury-navy text-white rounded-full flex items-center justify-center text-sm font-semibold",children:i+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:l.destination}),e.jsxs("div",{className:"text-sm text-slate-600",children:[l.count," booking",l.count>1?"s":""]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-luxury-gold",children:m(l.amount)}),e.jsxs("div",{className:"text-sm text-slate-600",children:[m(l.amount/l.count)," avg"]})]})]},l.destination))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[Object.keys(s.seasonalBreakdown).length>0&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-luxury-gold"}),"Seasonal Preferences"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(s.seasonalBreakdown).sort(([,l],[,i])=>i-l).map(([l,i])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-900",children:l}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-20 bg-slate-200 rounded-full h-2",children:e.jsx("div",{className:"bg-luxury-navy h-2 rounded-full",style:{width:`${i/Math.max(...Object.values(s.seasonalBreakdown))*100}%`}})}),e.jsx("span",{className:"text-sm font-medium text-slate-700 w-8",children:i})]})]},l))})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsxs("h3",{className:"text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-luxury-gold"}),"Booking Insights"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Average advance booking"}),e.jsxs("span",{className:"font-semibold text-slate-900",children:[s.averageAdvanceBooking," days"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Average per night"}),e.jsx("span",{className:"font-semibold text-slate-900",children:m(s.totalSpent/Math.max(s.totalNights,1))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Average per booking"}),e.jsx("span",{className:"font-semibold text-slate-900",children:m(s.totalSpent/Math.max(s.totalBookings,1))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-slate-600",children:"Completion rate"}),e.jsxs("span",{className:"font-semibold text-slate-900",children:[Math.round((s.statusBreakdown.completed||0)/s.totalBookings*100),"%"]})]})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(A,{variant:"outline",onClick:y,className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4"}),"Refresh Analytics"]})})]}):e.jsx("div",{className:`text-center py-12 ${h}`,children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-50 to-cream-50 rounded-2xl p-8 border border-slate-200",children:[e.jsx(M,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-slate-800 mb-2",children:"Sign in to view analytics"}),e.jsx("p",{className:"text-slate-600",children:"Access detailed insights about your travel patterns and spending"})]})})},ke=()=>{const{user:h,isAuthenticated:n}=q(),[s,t]=k.useState("profile");if(!n||!h)return e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsx("title",{children:"Sign In Required - Vibe Hotel Booking"}),e.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),e.jsx(G,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-cream-50 to-slate-100 flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-2xl p-8 border border-slate-200 shadow-luxury-lg max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(he,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Sign In Required"}),e.jsx("p",{className:"text-slate-600 mb-6",children:"Please sign in to access your profile and booking history."}),e.jsx(Q,{to:"/",children:e.jsx(A,{size:"lg",className:"w-full",children:"Back to Home"})})]})})})})]});const o=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-slate-50 to-cream-50 rounded-2xl p-6 border border-slate-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"h-20 w-20 bg-gradient-to-r from-slate-700 to-slate-800 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:[h.firstName?.[0],h.lastName?.[0]]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-900",children:[h.firstName," ",h.lastName]}),e.jsx("p",{className:"text-slate-600",children:h.email}),e.jsxs("div",{className:"flex items-center mt-2 text-sm text-slate-500",children:[e.jsx(I,{className:"w-4 h-4 mr-1"}),"Member since ",new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]})]}),e.jsxs(A,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Edit Profile"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Total Bookings"}),e.jsx(H,{className:"w-5 h-5 text-luxury-navy"})]}),e.jsx("div",{className:"text-3xl font-bold text-luxury-navy mb-1",children:"0"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Lifetime reservations"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Rewards Points"}),e.jsx(K,{className:"w-5 h-5 text-luxury-gold"})]}),e.jsx("div",{className:"text-3xl font-bold text-luxury-gold mb-1",children:"2,450"}),e.jsx("p",{className:"text-sm text-slate-600",children:"Available points"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-slate-200 shadow-luxury",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Saved Hotels"}),e.jsx(O,{className:"w-5 h-5 text-red-500"})]}),e.jsx("div",{className:"text-3xl font-bold text-red-500 mb-1",children:"5"}),e.jsx("p",{className:"text-sm text-slate-600",children:"In wishlist"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-luxury",children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Account Information"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ge,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:"Email Address"}),e.jsx("div",{className:"text-sm text-slate-600",children:h.email})]})]}),e.jsx(B,{className:"w-5 h-5 text-slate-400"})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(be,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:"Phone Number"}),e.jsx("div",{className:"text-sm text-slate-600",children:"Not provided"})]})]}),e.jsx(B,{className:"w-5 h-5 text-slate-400"})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(z,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-900",children:"Location"}),e.jsx("div",{className:"text-sm text-slate-600",children:"Not specified"})]})]}),e.jsx(B,{className:"w-5 h-5 text-slate-400"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-luxury",children:[e.jsx("div",{className:"p-6 border-b border-slate-200",children:e.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Quick Actions"})}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsxs(Q,{to:"/my-bookings",className:"flex items-center justify-between p-4 rounded-xl bg-slate-50 hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(H,{className:"w-5 h-5 text-luxury-navy"}),e.jsx("span",{className:"font-medium text-slate-900",children:"View My Bookings"})]}),e.jsx(B,{className:"w-5 h-5 text-slate-400"})]}),e.jsxs("button",{className:"flex items-center justify-between w-full p-4 rounded-xl bg-slate-50 hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(O,{className:"w-5 h-5 text-red-500"}),e.jsx("span",{className:"font-medium text-slate-900",children:"Manage Favorites"})]}),e.jsx(B,{className:"w-5 h-5 text-slate-400"})]}),e.jsxs("button",{className:"flex items-center justify-between w-full p-4 rounded-xl bg-slate-50 hover:bg-slate-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(K,{className:"w-5 h-5 text-luxury-gold"}),e.jsx("span",{className:"font-medium text-slate-900",children:"Rewards Program"})]}),e.jsx(B,{className:"w-5 h-5 text-slate-400"})]})]})]})]});return e.jsxs(e.Fragment,{children:[e.jsxs(_,{children:[e.jsxs("title",{children:["My Profile - ",h.firstName," ",h.lastName," - Vibe Hotel Booking"]}),e.jsx("meta",{name:"description",content:"Manage your profile, view booking history, and update your travel preferences."}),e.jsx("meta",{name:"robots",content:"noindex, nofollow"})]}),e.jsx(G,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-cream-50 to-slate-100",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"border-b border-slate-200",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>t("profile"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${s==="profile"?"border-luxury-navy text-luxury-navy":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Profile"}),e.jsx("button",{onClick:()=>t("bookings"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${s==="bookings"?"border-luxury-navy text-luxury-navy":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"My Bookings"}),e.jsx("button",{onClick:()=>t("preferences"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${s==="preferences"?"border-luxury-navy text-luxury-navy":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Preferences"}),e.jsxs("button",{onClick:()=>t("analytics"),className:`py-2 px-1 border-b-2 font-medium text-sm transition-colors ${s==="analytics"?"border-luxury-navy text-luxury-navy":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:[e.jsx(M,{className:"w-4 h-4 inline mr-2"}),"Analytics"]})]})})}),e.jsxs("div",{children:[s==="profile"&&o(),s==="bookings"&&e.jsx(xe,{}),s==="preferences"&&e.jsx(je,{}),s==="analytics"&&e.jsx(ye,{})]})]})})})]})};export{ke as default};
//# sourceMappingURL=UserProfilePage-CzeHyAkU.js.map
